import{_ as W,o as C,c as y,a as t,t as w,b as V,z as nt,k as H,d as Y,A as rt,g as dt,B as ct,J as ft,e as j,C as q,u as vt,f as ut,h as tt,i as et,r as h,w as D,v as S,j as z,F as O,Z as Q,n as m,p as pt,l as J,m as mt,q as X,s as wt}from"./index-DrGJXKPc.js";import{G as gt,a as ht,U as kt,B as Ct,g as xt}from"./gameView-BljE8SS3.js";BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");BigInt("1000000000000000000");const yt=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("0x8000000000000000000000000000000000000000000000000000000000000000")*BigInt(-1);BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");async function bt(n,f,v,o){const u="https://ib9fm6yjjg.execute-api.ap-northeast-2.amazonaws.com/ctp/ctp/create-prompt",d={prompt_hash:n,prompt:f,secret_hash:v,secret:o};try{const p=await(await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})).json();console.log(p.message)}catch(r){console.error("Error:",r)}}const _t="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='11'%20height='18'%20viewBox='0%200%2011%2018'%20fill='none'%3e%3crect%20x='8.59265'%20y='0.928223'%20width='2.69743'%20height='11.4442'%20transform='rotate(45%208.59265%200.928223)'%20fill='black'/%3e%3crect%20width='2.69743'%20height='11.4447'%20transform='matrix(0.707107%20-0.707107%20-0.707107%20-0.707107%208.59265%2017.1123)'%20fill='black'/%3e%3c/svg%3e",$t="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='11'%20height='18'%20viewBox='0%200%2011%2018'%20fill='none'%3e%3crect%20width='2.69743'%20height='11.4442'%20transform='matrix(-0.707107%200.707107%200.707107%200.707107%202.40735%200.928223)'%20fill='black'/%3e%3crect%20x='2.40735'%20y='17.1123'%20width='2.69743'%20height='11.4447'%20transform='rotate(-135%202.40735%2017.1123)'%20fill='black'/%3e%3c/svg%3e",E="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='21'%20height='21'%20viewBox='0%200%2021%2021'%20fill='none'%3e%3ccircle%20cx='10.5'%20cy='10.0203'%20r='9'%20fill='%234DC4CF'%20stroke='black'%20stroke-width='2'/%3e%3cline%20x1='6.44978'%20y1='5.07048'%20x2='15.6422'%20y2='14.2629'%20stroke='black'%20stroke-width='2'/%3e%3cline%20x1='5.7426'%20y1='14.2629'%20x2='14.935'%20y2='5.07048'%20stroke='black'%20stroke-width='2'/%3e%3c/svg%3e",Mt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='103'%20height='102'%20viewBox='0%200%20103%20102'%20fill='none'%3e%3cpath%20d='M51.5%20100.855C79.1144%20100.855%20101.5%2078.502%20101.5%2050.9277C101.5%2023.3534%2079.1144%201%2051.5%201C23.8856%201%201.49969%2023.3534%201.49969%2050.9277C1.49969%2078.502%2023.8856%20100.855%2051.5%20100.855Z'%20fill='%23FFCF36'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M31.692%2062.891C41.1321%2062.891%2048.7848%2055.2494%2048.7848%2045.8231C48.7848%2036.3967%2041.1321%2028.7551%2031.692%2028.7551C22.252%2028.7551%2014.5993%2036.3967%2014.5993%2045.8231C14.5993%2055.2494%2022.252%2062.891%2031.692%2062.891Z'%20fill='white'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M31.6922%2038.0069C34.2507%2038.0069%2036.3248%2035.9358%2036.3248%2033.381C36.3248%2030.8262%2034.2507%2028.7551%2031.6922%2028.7551C29.1336%2028.7551%2027.0595%2030.8262%2027.0595%2033.381C27.0595%2035.9358%2029.1336%2038.0069%2031.6922%2038.0069Z'%20fill='black'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M72.5866%2062.891C82.0267%2062.891%2089.6794%2055.2494%2089.6794%2045.8231C89.6794%2036.3967%2082.0267%2028.7551%2072.5866%2028.7551C63.1466%2028.7551%2055.4939%2036.3967%2055.4939%2045.8231C55.4939%2055.2494%2063.1466%2062.891%2072.5866%2062.891Z'%20fill='white'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M72.5867%2038.0069C75.1452%2038.0069%2077.2193%2035.9358%2077.2193%2033.381C77.2193%2030.8262%2075.1452%2028.7551%2072.5867%2028.7551C70.0282%2028.7551%2067.9541%2030.8262%2067.9541%2033.381C67.9541%2035.9358%2070.0282%2038.0069%2072.5867%2038.0069Z'%20fill='black'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M51.9997%2076H72.7666'%20stroke='black'%20stroke-width='1.79'%20stroke-miterlimit='10'/%3e%3c/svg%3e",Dt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='145'%20height='127'%20viewBox='0%200%20145%20127'%20fill='none'%3e%3crect%20x='1.82382'%20y='47.3644'%20width='12.6842'%20height='15.621'%20transform='rotate(-24.4037%201.82382%2047.3644)'%20fill='%23D9D9D9'%20stroke='black'%20stroke-width='2'/%3e%3crect%20x='1.82382'%20y='104.633'%20width='12.6842'%20height='15.621'%20transform='rotate(-24.4037%201.82382%20104.633)'%20fill='%23FFCF36'%20stroke='black'%20stroke-width='2'/%3e%3crect%20x='125.171'%20y='79.6696'%20width='12.6842'%20height='15.621'%20transform='rotate(-24.4037%20125.171%2079.6696)'%20fill='%2353926D'%20stroke='black'%20stroke-width='2'/%3e%3crect%20x='111.286'%20y='43.5991'%20width='12.6842'%20height='15.621'%20transform='rotate(25.255%20111.286%2043.5991)'%20fill='%23FC4B3B'%20stroke='black'%20stroke-width='2'/%3e%3crect%20x='108.722'%20y='100.918'%20width='12.6842'%20height='15.621'%20transform='rotate(-1.59917%20108.722%20100.918)'%20fill='%23D9D9D9'%20stroke='black'%20stroke-width='2'/%3e%3crect%20x='72.2731'%20y='14.2661'%20width='12.6842'%20height='15.621'%20transform='rotate(-20.6967%2072.2731%2014.2661)'%20fill='%234DC4CF'%20stroke='black'%20stroke-width='2'/%3e%3cpath%20d='M69.5154%20125.998C94.656%20125.998%20115.036%20105.647%20115.036%2080.5433C115.036%2055.4392%2094.656%2035.0884%2069.5154%2035.0884C44.3748%2035.0884%2023.9944%2055.4392%2023.9944%2080.5433C23.9944%20105.647%2044.3748%20125.998%2069.5154%20125.998Z'%20fill='%23FFD653'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M98.4573%2093.0337C91.9477%20126.29%2049.8065%20127.452%2040.5743%2093.1789L98.4573%2093.0337Z'%20fill='%23FC4B3B'%20stroke='black'%20stroke-width='1.8'%20stroke-miterlimit='10'/%3e%3cpath%20d='M96.459%2099.8592C97.2996%2097.7564%2097.9774%2095.4851%2098.4573%2093.0337L40.5743%2093.1789C41.2229%2095.5809%2042.0345%2097.8028%2042.9827%2099.8592H96.459Z'%20fill='%23F5F3F3'%20stroke='black'%20stroke-width='1.8'%20stroke-miterlimit='10'/%3e%3cpath%20d='M92.2001%2082.0862C94.2565%2083.0215%2096.1239%2084.1136%2097.7499%2085.2899C100.976%2082.4435%20103.012%2078.2814%20103.012%2073.6458C103.012%2065.0631%2096.0454%2058.1069%2087.4502%2058.1069C78.855%2058.1069%2071.8887%2065.0631%2071.8887%2073.6458C71.8887%2076.5532%2072.5303%2077.3866%2073.9207%2079.7131C79.0601%2078.9789%2084.4891%2078.5776%2092.1972%2082.0862H92.2001Z'%20fill='white'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M45.8091%2082.211C43.7526%2083.1462%2041.8853%2084.2383%2040.2593%2085.4146C37.0336%2082.5682%2034.9975%2078.4061%2034.9975%2073.7706C34.9975%2065.1879%2041.9638%2058.2317%2050.559%2058.2317C59.1542%2058.2317%2066.1205%2065.1879%2066.1205%2073.7706C66.1205%2076.678%2065.0321%2077.3866%2063.6417%2079.7131C57.768%2079.7131%2053.52%2078.7024%2045.812%2082.211H45.8091Z'%20fill='white'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M53.2267%2078.9457C55.556%2078.9457%2057.4443%2077.0601%2057.4443%2074.7342C57.4443%2072.4082%2055.556%2070.5227%2053.2267%2070.5227C50.8974%2070.5227%2049.0091%2072.4082%2049.0091%2074.7342C49.0091%2077.0601%2050.8974%2078.9457%2053.2267%2078.9457Z'%20fill='black'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M84.6401%2078.9457C86.9694%2078.9457%2088.8577%2077.0601%2088.8577%2074.7342C88.8577%2072.4082%2086.9694%2070.5227%2084.6401%2070.5227C82.3107%2070.5227%2080.4225%2072.4082%2080.4225%2074.7342C80.4225%2077.0601%2082.3107%2078.9457%2084.6401%2078.9457Z'%20fill='black'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3crect%20x='-1.32382'%20y='0.497493'%20width='12.6842'%20height='15.621'%20transform='matrix(-0.910657%20-0.413164%20-0.413164%200.910657%2032.0445%2074.2646)'%20fill='%23542234'%20stroke='black'%20stroke-width='2'/%3e%3cpath%20d='M40.3776%2045.9933L46.0308%208.82446L72.6573%2035.3671L40.3776%2045.9933Z'%20fill='%2353926D'%20stroke='black'%20stroke-width='2'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M42.4732%2025.5636L43.4846%2018.914L54.072%2015.4286L58.8357%2020.1772L42.4732%2025.5636Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M40.6192%2037.7546L41.6305%2031.1049L62.8055%2024.1342L67.5691%2028.8828L40.6192%2037.7546Z'%20fill='white'/%3e%3cpath%20d='M40.3776%2045.9933L46.0308%208.82446L72.6573%2035.3671L40.3776%2045.9933Z'%20stroke='black'%20stroke-width='2'/%3e%3c/svg%3e",St={key:0,class:"modal"},Tt={class:"img-wrapper"},At={class:"content-text"},Bt={class:"img-wrapper"},Ut={class:"content-text"},Ft={__name:"ConfirmModal",props:{confirmType:Number,message:String},emits:["closeConfirmModal"],setup(n,{emit:f}){const v=f,o=()=>{v("closeConfirmModal")};return(u,d)=>(C(),y("div",{class:"modal-background",onClick:o},[n.confirmType===0?(C(),y("div",St,[t("img",{src:E,alt:"close",onClick:o}),t("div",Tt,[d[0]||(d[0]=t("img",{src:Mt,alt:"imoji"},null,-1)),d[1]||(d[1]=t("div",{class:"title-text"},"Hmm!",-1)),t("div",At,w(n.message),1)])])):V("",!0),n.confirmType===1?(C(),y("div",{key:1,class:"modal",onClick:o},[t("img",{src:E,alt:"close",onClick:o}),t("div",Bt,[d[2]||(d[2]=t("img",{src:Dt,alt:"imoji"},null,-1)),d[3]||(d[3]=t("div",{class:"title-text"},"Yay!",-1)),t("div",Ut,w(n.message),1)])])):V("",!0)]))}},Lt=W(Ft,[["__scopeId","data-v-bb420b1f"]]);let M,I,b={Game:void 0,GameFrontend:void 0,Award:void 0,Badge:void 0};const st={gasPrice:"100000000001"};async function K(n){if(!M)try{M=new ct(n)}catch(f){console.log(f),M=new ft(j.rpcUrl)}console.log(M),I=await M.getSigner(),b.Game||(b.Game=new q(j.contracts.Game,gt.abi,M)),b.GameFrontend||(b.GameFrontend=new q(j.contracts.GameFrontend,ht.abi,M)),b.Award||(b.Award=new q(j.contracts.Award,kt.abi,M)),b.Badge||(b.Badge=new q(j.contracts.Badge,Ct.abi,M))}function Vt(n){return new Promise(f=>setTimeout(f,n))}async function at(n){for(let v=0;v<10;v++){const o=await M.getTransactionReceipt(n);if(o)return o.status==1;await Vt(1e3)}return!1}async function It(n,f){await K(n);let v=await b.Award.connect(I).allowance(I.address,await b.Game.getAddress());if(console.log(v),v<f)try{let o=await b.Award.connect(I).approve(await b.Game.getAddress(),yt,{...st});return await at(o.hash),o}catch(o){console.error(o);return}}async function Pt(n,f,v,o){await K(n),console.log(f),console.log(v),console.log(o);try{let u=await b.Game.connect(I).mint(f,v,o,{...st});return await at(u.hash),u}catch(u){console.error(u);return}}async function Nt(n,f,v){await K(n);const o=nt("0x"+f.toString(16),32),u=H(Y(`${v}`));let d;{const g=rt.defaultAbiCoder().encode(["bytes32","bytes32"],[o,u]);d=await I.signMessage(dt(H(g)))}const r={tokenId:f.toString(),secretHash:u,user:I.address,sig:d},p="https://ib9fm6yjjg.execute-api.ap-northeast-2.amazonaws.com/ctp/ctp/submit-secret";try{const g=await(await fetch(p,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json();return console.log(g.status),console.log(g.hash),{status:g.status,hash:g.hash}}catch(k){return console.error("Error:",k),{status:!1,hash:""}}}const Gt={class:"modal"},Zt={class:"modal-container"},jt={class:"modal-wrapper"},Ht={class:"modal-info"},qt={class:"modal-info-top"},Ot=["src"],zt={class:"modal-info-title-wrapper"},Et={class:"title-wrapper"},Wt={class:"title-text"},Jt={class:"type-wrapper"},Rt={class:"type-text"},Yt={class:"title-description"},Qt={class:"modal-info-bottom"},Kt={class:"details-title-wrapper"},Xt={class:"details-content-text"},te={class:"details-title-wrapper"},ee={class:"details-content-text"},se={class:"details-title-wrapper"},ae={class:"details-content-text"},ie={class:"details-title-wrapper"},le={class:"details-award-text"},oe={class:"bottom-wrapper"},ne={class:"question-wrapper"},re={class:"question-content-wrapper"},de={class:"answer-wrapper"},ce={class:"answer-content-input"},fe={class:"pk-wrapper"},ve={class:"pk-content-wrapper"},ue={__name:"ChallengeModal",props:{nft:{type:Object,required:!0}},emits:["closeModal"],setup(n,{emit:f}){vt(),ut();const{walletProvider:v}=tt(),{address:o,chainId:u,isConnected:d}=et(),r=h(null),p=h(""),k=n,g=f,T=h(""),P=h(""),N=h(""),G=async()=>{const c="https://ib9fm6yjjg.execute-api.ap-northeast-2.amazonaws.com/ctp/ctp/qa",i={token_id:k.nft.id.toString(),user:o.value,prompt_hash:k.nft.promptHash,question:T.value};try{const F=await(await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).json();console.log(F.message),P.value=F.message}catch(x){console.error("Error:",x)}},Z=async()=>{const{status:c,hash:i}=await Nt(v.value,k.nft.tokenId,N.value);c?(p.value="You successfully solved the problem. ",r.value=1):(p.value="Wrong answer. Please try again.",r.value=0)},A=()=>{g("closeModal")},B=()=>{const c=r.value;r.value="",g("closeConfirmModal"),c===1&&g("closeModal")},U=c=>{const i=new Date(c*1e3),x=String(i.getUTCMonth()+1).padStart(2,"0"),F=String(i.getUTCDate()).padStart(2,"0"),l=i.getUTCHours(),e=String(i.getUTCMinutes()).padStart(2,"0"),s=l>=12?"PM":"AM",_=l%12||12;return`${x}.${F} ${_}:${e} ${s}`},$=(c,i)=>{const F=(i-c)/(60*60*24);return Math.round(F)},a=c=>(c/1e18).toFixed(2);return(c,i)=>(C(),y(O,null,[t("div",Gt,[t("div",Zt,[i[14]||(i[14]=t("div",{class:"modal-title-text"},"Challenge",-1)),t("div",jt,[t("div",{class:"close-wrapper"},[t("img",{src:E,alt:"close",onClick:A})]),t("div",Ht,[t("div",qt,[t("img",{src:n.nft.imageUri||"@/assets/nft/0.png",alt:"nft"},null,8,Ot),t("div",zt,[i[4]||(i[4]=t("div",{class:"live-wrapper"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},[t("circle",{cx:"6",cy:"6.02026",r:"5.5",fill:"#53926D"})]),t("div",{class:"live-text"},"Live")],-1)),t("div",Et,[t("div",Wt,w(n.nft.name),1),t("div",Jt,[t("div",Rt,w(n.nft.gameType),1)]),t("div",Yt,w(n.nft.description),1)])])]),t("div",Qt,[t("div",Kt,[i[5]||(i[5]=t("div",{class:"details-title-text"},"Start Date",-1)),t("div",Xt,w(U(n.nft.startDate)),1)]),t("div",te,[i[6]||(i[6]=t("div",{class:"details-title-text"},"End Date",-1)),t("div",ee,w(U(n.nft.endDate)),1)]),t("div",se,[i[7]||(i[7]=t("div",{class:"details-title-text"},"Remaining",-1)),t("div",ae,w($(n.nft.startDate,n.nft.endDate))+" days ",1)]),t("div",ie,[i[8]||(i[8]=t("div",{class:"details-award-text"},"Awards",-1)),t("div",le,w(a(n.nft.awards))+" USDC ",1)])])]),t("div",oe,[t("div",ne,[i[10]||(i[10]=t("div",{class:"question-title-text"},"Question",-1)),t("div",re,[D(t("textarea",{class:"question-content-input",type:"text","onUpdate:modelValue":i[0]||(i[0]=x=>T.value=x)},null,512),[[S,T.value]]),t("div",{class:"submit-btn",onClick:i[1]||(i[1]=x=>G())},i[9]||(i[9]=[t("div",{class:"submit-text"},"Submit",-1)]))])]),t("div",de,[i[11]||(i[11]=t("div",{class:"answer-title-text"},"Answer",-1)),t("div",ce,w(P.value),1)]),t("div",fe,[i[13]||(i[13]=t("div",{class:"pk-title-text"},"Secret",-1)),t("div",ve,[D(t("textarea",{class:"pk-content-input",type:"text","onUpdate:modelValue":i[2]||(i[2]=x=>N.value=x)},null,512),[[S,N.value]]),t("div",{class:"submit-btn",onClick:i[3]||(i[3]=x=>Z())},i[12]||(i[12]=[t("div",{class:"submit-text"},"Submit",-1)]))])])])])])]),r.value===0||r.value===1?(C(),z(Lt,{key:0,confirmType:r.value,message:p.value,onCloseConfirmModal:B},null,8,["confirmType","message"])):V("",!0)],64))}},pe=W(ue,[["__scopeId","data-v-95b96c3b"]]),me={class:"modal"},we={class:"modal-container"},ge={class:"modal-wrapper"},he={class:"content-wrapper"},ke={class:"content-left-wrapper"},Ce={class:"name-wrapper"},xe={class:"description-wrapper"},ye={class:"date-wrapper"},be={class:"date-input-wrapper"},_e={class:"date-wrapper"},$e={class:"date-input-wrapper"},Me={class:"award-wrapper"},De={class:"award-input-wrapper"},Se={class:"content-right-wrapper"},Te={class:"type-wrapper"},Ae={class:"type-content-secret-wrapper"},Be={class:"description-wrapper"},Ue={class:"name-wrapper"},Fe={__name:"CreateModal",emits:["closeCreateModal"],setup(n,{emit:f}){const v=f,o=h({name:"",description:"",award:"",gameType:"secret",prompt:"",secret:"",start:0,end:0,winner:Q}),u=h(""),d=h(""),r=h(""),p=h(""),k=h(""),g=h(0),{walletProvider:T}=tt(),{address:P,chainId:N,isConnected:G}=et(),Z=()=>{v("closeCreateModal")},A=$=>{g.value=$},B=()=>{if(u.value===""||d.value==""||r.value==""||p.value==""||k.value==""||!G.value||!d.value.includes(r.value))return!1;const $=new Date(p.value).getTime()/1e3,a=new Date(k.value).getTime()/1e3;return!($>=a)},U=async()=>{if(B()){o.value.start=new Date(p.value).getTime()/1e3,o.value.end=new Date(k.value).getTime()/1e3,o.value.prompt=H(Y(d.value)),o.value.secret=H(H(Y(r.value)));const $=pt(u.value.toString(),18);await bt(o.value.prompt,d.value,o.value.secret,r.value),await It(T.value,$),await Pt(T.value,P.value,o.value,$)}};return($,a)=>(C(),y("div",me,[t("div",we,[a[23]||(a[23]=t("div",{class:"title-text"},"Get started with a CTP",-1)),t("div",ge,[t("div",{class:"close-wrapper"},[t("img",{src:E,alt:"close",onClick:Z})]),a[22]||(a[22]=t("div",{class:"about-wrapper"},[t("div",{class:"about-text"},"Create A New Challenge")],-1)),t("div",he,[t("div",ke,[t("div",Ce,[a[8]||(a[8]=t("div",{class:"name-text"},"Name",-1)),D(t("input",{class:"name-input","onUpdate:modelValue":a[0]||(a[0]=c=>o.value.name=c),placeholder:"Name",type:"text"},null,512),[[S,o.value.name]])]),t("div",xe,[a[9]||(a[9]=t("div",{class:"description-text"},"Description",-1)),D(t("textarea",{class:"description-input","onUpdate:modelValue":a[1]||(a[1]=c=>o.value.description=c),placeholder:"Description"},null,512),[[S,o.value.description]])]),t("div",ye,[a[10]||(a[10]=t("div",{class:"date-text"},"Start Date",-1)),t("div",be,[D(t("input",{class:"date-input","onUpdate:modelValue":a[2]||(a[2]=c=>p.value=c),type:"datetime-local"},null,512),[[S,p.value]])])]),t("div",_e,[a[11]||(a[11]=t("div",{class:"date-text"},"End Date",-1)),t("div",$e,[D(t("input",{class:"date-input","onUpdate:modelValue":a[3]||(a[3]=c=>k.value=c),type:"datetime-local"},null,512),[[S,k.value]])])]),t("div",Me,[a[13]||(a[13]=t("div",{class:"award-text"},"Award",-1)),t("div",De,[D(t("input",{class:"award-input","onUpdate:modelValue":a[4]||(a[4]=c=>u.value=c),type:"number"},null,512),[[S,u.value]]),a[12]||(a[12]=t("div",{class:"usdc-wrapper"},[t("div",{class:"usdc-text"},"USDC")],-1))])])]),t("div",Se,[t("div",Te,[a[17]||(a[17]=t("div",{class:"type-text"},"Type",-1)),t("div",Ae,[t("div",{class:m(["type-content-wrapper",{"is-type-active":g.value==0}]),onClick:a[5]||(a[5]=c=>A(0))},a[14]||(a[14]=[t("div",{class:"type-content-text"},"Secret",-1)]),2),t("div",{class:m(["type-content-wrapper",{"is-type-active":g.value==1}])},a[15]||(a[15]=[t("div",{class:"type-content-text"},"Slang",-1)]),2),t("div",{class:m(["type-content-wrapper",{"is-type-active":g.value==2}])},a[16]||(a[16]=[t("div",{class:"type-content-text"},"Mismatch",-1)]),2)])]),t("div",Be,[a[18]||(a[18]=t("div",{class:"description-text"},"Prompt",-1)),D(t("textarea",{class:"prompt-input","onUpdate:modelValue":a[6]||(a[6]=c=>d.value=c),placeholder:"Prompt"},null,512),[[S,d.value]])]),t("div",Ue,[a[19]||(a[19]=t("div",{class:"name-text"},"Secret",-1)),D(t("input",{class:"name-input","onUpdate:modelValue":a[7]||(a[7]=c=>r.value=c),placeholder:"Secret",type:"text"},null,512),[[S,r.value]])]),t("div",{class:"submit-wrapper"},[a[21]||(a[21]=t("div",{class:"empty-text"},null,-1)),t("div",{class:"submit-btn-wrapper",onClick:U},a[20]||(a[20]=[t("div",{class:"submit-btn-text"},"Submit",-1)]))])])])])])]))}},Le=W(Fe,[["__scopeId","data-v-99ad3ca0"]]),Ve={key:0,class:"challenge"},Ie={class:"challenge-wrapper"},Pe={class:"challenge-live-filter"},Ne={class:"challenge-type-filter-wrapper"},Ge={class:"challenge-type-filter"},Ze={class:"nfts"},je={class:"nft-content-wrapper"},He={class:"nft-content-top-wrapper"},qe=["src"],Oe={class:"nft-content-top-title-wrapper"},ze={class:"live-wrapper"},Ee={key:0,xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},We=["fill"],Je={key:1,xmlns:"http://www.w3.org/2000/svg",width:"19",height:"19",viewBox:"0 0 19 19",fill:"none"},Re={class:"live-text"},Ye={class:"live-title-wrapper"},Qe={class:"live-title-text"},Ke={class:"type-wrapper"},Xe={class:"type-text"},ts={class:"nft-description"},es={class:"nft-date-wrapper"},ss={class:"nft-date-content-wrapper"},as={class:"nft-date-content-text"},is={class:"nft-date-content-text"},ls={class:"nft-duration-wrapper"},os={class:"nft-duration-content-text"},ns={class:"nft-award-wrapper"},rs=["onClick"],ds={class:"nft-btn-text"},cs={class:"pagination"},fs={class:"pagination-wrapper"},vs={class:"number-wrapper"},us=["onClick"],R=6,ps={__name:"ChallengePage",setup(n){const f=h(!1),v=h(!1),o=h(null),u=h([]),d=h(0),r=h(0),p=h(1),k=J(()=>g.value.length==0?1:Math.floor((g.value.length-1)/R)+1),g=J(()=>{if(u.value.length==0)return[];let l=u.value;d.value===1?l=u.value.filter(s=>s.status==="Live"):d.value===2?l=u.value.filter(s=>s.status==="Solved"):d.value===3&&(l=u.value.filter(s=>s.status==="Verified"));let e=l;return r.value===1?e=l.filter(s=>s.gameType==="secret"):r.value===2?e=[]:r.value===3&&(e=[]),e}),T=J(()=>g.value.slice((p.value-1)*R,p.value*R)),P=l=>{l.status==="Live"&&(o.value=l,f.value=!0)},N=()=>{f.value=!1},G=()=>{v.value=!0},Z=()=>{v.value=!1},A=l=>{d.value=l,p.value=1},B=l=>{r.value=l,p.value=1},U=l=>{l>k.value?p.value=k.value:l<1?p.value=1:p.value=l},$=async()=>{const l=await xt(0,1e3);u.value=l.map(e=>{const s=e[11],_=Math.floor(Date.now()/1e3);console.log(s);let L="Live";return s.toLowerCase()==="0xffffffffffffffffffffffffffffffffffffffff"||s===Q&&_>Number(e[9])?L="Verified":s!==Q&&(L="Solved"),{status:L,winnerAddress:s,id:e[0],tokenId:e[1],name:e[2],description:e[3],gameType:e[4],promptHash:e[5],secretHash:e[6],imageUri:e[7],startDate:Number(e[8]),endDate:Number(e[9]),awards:Number(e[10])}}).reverse(),console.log(u.value)},a=l=>{const e=new Date(l*1e3),s=String(e.getUTCMonth()+1).padStart(2,"0"),_=String(e.getUTCDate()).padStart(2,"0"),L=e.getUTCHours(),it=String(e.getUTCMinutes()).padStart(2,"0"),lt=L>=12?"PM":"AM",ot=L%12||12;return`${s}.${_} ${ot}:${it} ${lt}`},c=(l,e)=>{const _=(e-l)/(60*60*24);return Math.round(_)},i=l=>wt(l.toLocaleString("fullwide",{useGrouping:!1}),18),x=l=>l&&`Winner: ${l.slice(0,6)}...${l.slice(-4)}`,F=l=>l.length>96?`${l.slice(0,96)}...`:l;return mt(()=>{$()}),(l,e)=>(C(),y(O,null,[!f.value&&!v.value?(C(),y("div",Ve,[t("div",Ie,[e[13]||(e[13]=t("div",{class:"challenge-title-text"},"Challenges",-1)),t("div",Pe,[t("div",{class:m(["challenge-live-filter-btn",{"is-live-active":d.value===0}]),onClick:e[0]||(e[0]=s=>A(0))}," All ",2),t("div",{class:m(["challenge-live-filter-btn",{"is-live-active":d.value===1}]),onClick:e[1]||(e[1]=s=>A(1))}," Live ",2),t("div",{class:m(["challenge-live-filter-btn",{"is-live-active":d.value===2}]),onClick:e[2]||(e[2]=s=>A(2))}," Solved ",2),t("div",{class:m(["challenge-live-filter-btn",{"is-live-active":d.value===3}]),onClick:e[3]||(e[3]=s=>A(3))}," Verified ",2)]),t("div",Ne,[t("div",Ge,[t("div",{class:m(["challenge-type-filter-btn",{"is-type-active":r.value===0}]),onClick:e[4]||(e[4]=s=>B(0))},[t("div",{class:m(["challenge-type-filter-btn-text",{"is-type-text-active":r.value===0}])}," All Type ",2)],2),t("div",{class:m(["challenge-type-filter-btn",{"is-type-active":r.value===1}]),onClick:e[5]||(e[5]=s=>B(1))},[t("div",{class:m(["challenge-type-filter-btn-text",{"is-type-text-active":r.value===1}])}," Secret ",2)],2),t("div",{class:m(["challenge-type-filter-btn",{"is-type-active":r.value===2}]),onClick:e[6]||(e[6]=s=>B(2))},[t("div",{class:m(["challenge-type-filter-btn-text",{"is-type-text-active":r.value===2}])}," Slang ",2)],2),t("div",{class:m(["challenge-type-filter-btn",{"is-type-active":r.value===3}]),onClick:e[7]||(e[7]=s=>B(3))},[t("div",{class:m(["challenge-type-filter-btn-text",{"is-type-text-active":r.value===3}])}," Mismatch ",2)],2)]),t("div",{class:"challenge-create-new-btn",onClick:G}," + Create A New Challange ")]),t("div",Ze,[(C(!0),y(O,null,X(T.value,(s,_)=>(C(),y("div",{key:s.id,class:m(["nft-wrapper",{"is-verified-nft":s.status==="Verified"}])},[t("div",je,[t("div",He,[t("img",{src:s.imageUri?s.imageUri:"@/assets/nft/0.png",alt:"nft"},null,8,qe),t("div",Oe,[t("div",ze,[s.status!=="Verified"?(C(),y("svg",Ee,[t("circle",{cx:"6",cy:"6.02026",r:"5.5",fill:s.status==="Live"?"#53926D":"#CC0000"},null,8,We)])):V("",!0),s.status==="Verified"?(C(),y("svg",Je,e[10]||(e[10]=[t("circle",{cx:"9.5",cy:"9.5",r:"8",fill:"#4DC4CF",stroke:"black","stroke-width":"2"},null,-1),t("rect",{x:"3.5",y:"7.91431",width:"2",height:"8.48528",transform:"rotate(-45 3.5 7.91431)",fill:"black"},null,-1),t("rect",{width:"2",height:"8.48563",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 15.5 7.91431)",fill:"black"},null,-1)]))):V("",!0),t("div",Re,w(s.status),1)]),t("div",Ye,[t("div",Qe,w(s.name),1),t("div",Ke,[t("div",Xe,w(s.gameType),1)])])])]),t("div",ts,w(F(s.description)),1),t("div",es,[e[11]||(e[11]=t("div",{class:"nft-date-text"},"Date",-1)),t("div",ss,[t("div",as,w(a(s.startDate)),1),t("div",is," ~ "+w(a(s.endDate)),1)])]),t("div",ls,[e[12]||(e[12]=t("div",{class:"nft-duration-text"},"Remaining",-1)),t("div",os,w(c(s.startDate,s.endDate))+" days ",1)]),t("div",ns,[t("div",{class:m(["nft-award-text",{"is-verified-nft-text":s.status==="Verified"}])}," Award ",2),t("div",{class:m(["nft-award-content-text",{"is-verified-nft-text":s.status==="Verified","is-solved-nft-text":s.status==="Solved"}])},w(i(s.awards))+" USDC ",3)])]),t("div",{class:m(["nft-btn",{"is-live":s.status==="Live","is-verified":s.status==="Verified"}]),onClick:L=>s.status!=="Solved"&&P(s)},[t("div",ds,w(s.status==="Solved"?x(s.winnerAddress):s.status==="Verified"?"Verified":"Challenge"),1)],10,rs)],2))),128))]),t("div",cs,[t("div",fs,[t("img",{src:_t,alt:"left",onClick:e[8]||(e[8]=s=>U(p.value-1))}),(C(!0),y(O,null,X(k.value,(s,_)=>(C(),y("div",vs,[t("div",{class:m(["number-text",{"is-pagination-active":_+1===p.value}]),onClick:L=>U(_+1)},w(_+1),11,us)]))),256)),t("img",{src:$t,alt:"right",onClick:e[9]||(e[9]=s=>U(p.value+1))})])])])])):V("",!0),f.value?(C(),z(pe,{key:1,nft:o.value,onCloseModal:N},null,8,["nft"])):V("",!0),v.value?(C(),z(Le,{key:2,onCloseCreateModal:Z})):V("",!0)],64))}},ms=W(ps,[["__scopeId","data-v-80751aa2"]]),hs={__name:"ChallengeView",setup(n){return(f,v)=>(C(),z(ms))}};export{hs as default};
