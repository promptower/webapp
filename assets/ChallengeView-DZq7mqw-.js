import{_ as N,o as x,c as b,a as t,b as T,z as X,k as I,t as j,A as tt,g as et,B as st,J as at,d as L,C as P,u as it,e as ot,f as z,h as W,r as k,i as m,w as $,v as M,j as G,F as H,Z as q,n as v,p as lt,l as nt,m as rt,q as dt}from"./index-ClXx8EmW.js";import{G as ct,a as ft,U as pt,B as vt,g as ut}from"./gameView-LEoW3sF7.js";BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");BigInt("1000000000000000000");const mt=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("0x8000000000000000000000000000000000000000000000000000000000000000")*BigInt(-1);BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");async function wt(l,n,r,o){const f="https://ib9fm6yjjg.execute-api.ap-northeast-2.amazonaws.com/ctp/ctp/create-prompt",p={prompt_hash:l,prompt:n,secret_hash:r,secret:o};try{const h=await(await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).json();console.log(h.message)}catch(c){console.error("Error:",c)}}const ht="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='11'%20height='18'%20viewBox='0%200%2011%2018'%20fill='none'%3e%3crect%20x='8.59265'%20y='0.928223'%20width='2.69743'%20height='11.4442'%20transform='rotate(45%208.59265%200.928223)'%20fill='black'/%3e%3crect%20width='2.69743'%20height='11.4447'%20transform='matrix(0.707107%20-0.707107%20-0.707107%20-0.707107%208.59265%2017.1123)'%20fill='black'/%3e%3c/svg%3e",gt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='11'%20height='18'%20viewBox='0%200%2011%2018'%20fill='none'%3e%3crect%20width='2.69743'%20height='11.4442'%20transform='matrix(-0.707107%200.707107%200.707107%200.707107%202.40735%200.928223)'%20fill='black'/%3e%3crect%20x='2.40735'%20y='17.1123'%20width='2.69743'%20height='11.4447'%20transform='rotate(-135%202.40735%2017.1123)'%20fill='black'/%3e%3c/svg%3e",Z="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='21'%20height='21'%20viewBox='0%200%2021%2021'%20fill='none'%3e%3ccircle%20cx='10.5'%20cy='10.0203'%20r='9'%20fill='%234DC4CF'%20stroke='black'%20stroke-width='2'/%3e%3cline%20x1='6.44978'%20y1='5.07048'%20x2='15.6422'%20y2='14.2629'%20stroke='black'%20stroke-width='2'/%3e%3cline%20x1='5.7426'%20y1='14.2629'%20x2='14.935'%20y2='5.07048'%20stroke='black'%20stroke-width='2'/%3e%3c/svg%3e",xt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='103'%20height='102'%20viewBox='0%200%20103%20102'%20fill='none'%3e%3cpath%20d='M51.5%20100.855C79.1144%20100.855%20101.5%2078.502%20101.5%2050.9277C101.5%2023.3534%2079.1144%201%2051.5%201C23.8856%201%201.49969%2023.3534%201.49969%2050.9277C1.49969%2078.502%2023.8856%20100.855%2051.5%20100.855Z'%20fill='%23FFCF36'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M31.692%2062.891C41.1321%2062.891%2048.7848%2055.2494%2048.7848%2045.8231C48.7848%2036.3967%2041.1321%2028.7551%2031.692%2028.7551C22.252%2028.7551%2014.5993%2036.3967%2014.5993%2045.8231C14.5993%2055.2494%2022.252%2062.891%2031.692%2062.891Z'%20fill='white'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M31.6922%2038.0069C34.2507%2038.0069%2036.3248%2035.9358%2036.3248%2033.381C36.3248%2030.8262%2034.2507%2028.7551%2031.6922%2028.7551C29.1336%2028.7551%2027.0595%2030.8262%2027.0595%2033.381C27.0595%2035.9358%2029.1336%2038.0069%2031.6922%2038.0069Z'%20fill='black'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M72.5866%2062.891C82.0267%2062.891%2089.6794%2055.2494%2089.6794%2045.8231C89.6794%2036.3967%2082.0267%2028.7551%2072.5866%2028.7551C63.1466%2028.7551%2055.4939%2036.3967%2055.4939%2045.8231C55.4939%2055.2494%2063.1466%2062.891%2072.5866%2062.891Z'%20fill='white'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M72.5867%2038.0069C75.1452%2038.0069%2077.2193%2035.9358%2077.2193%2033.381C77.2193%2030.8262%2075.1452%2028.7551%2072.5867%2028.7551C70.0282%2028.7551%2067.9541%2030.8262%2067.9541%2033.381C67.9541%2035.9358%2070.0282%2038.0069%2072.5867%2038.0069Z'%20fill='black'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M51.9997%2076H72.7666'%20stroke='black'%20stroke-width='1.79'%20stroke-miterlimit='10'/%3e%3c/svg%3e",kt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='145'%20height='127'%20viewBox='0%200%20145%20127'%20fill='none'%3e%3crect%20x='1.82382'%20y='47.3644'%20width='12.6842'%20height='15.621'%20transform='rotate(-24.4037%201.82382%2047.3644)'%20fill='%23D9D9D9'%20stroke='black'%20stroke-width='2'/%3e%3crect%20x='1.82382'%20y='104.633'%20width='12.6842'%20height='15.621'%20transform='rotate(-24.4037%201.82382%20104.633)'%20fill='%23FFCF36'%20stroke='black'%20stroke-width='2'/%3e%3crect%20x='125.171'%20y='79.6696'%20width='12.6842'%20height='15.621'%20transform='rotate(-24.4037%20125.171%2079.6696)'%20fill='%2353926D'%20stroke='black'%20stroke-width='2'/%3e%3crect%20x='111.286'%20y='43.5991'%20width='12.6842'%20height='15.621'%20transform='rotate(25.255%20111.286%2043.5991)'%20fill='%23FC4B3B'%20stroke='black'%20stroke-width='2'/%3e%3crect%20x='108.722'%20y='100.918'%20width='12.6842'%20height='15.621'%20transform='rotate(-1.59917%20108.722%20100.918)'%20fill='%23D9D9D9'%20stroke='black'%20stroke-width='2'/%3e%3crect%20x='72.2731'%20y='14.2661'%20width='12.6842'%20height='15.621'%20transform='rotate(-20.6967%2072.2731%2014.2661)'%20fill='%234DC4CF'%20stroke='black'%20stroke-width='2'/%3e%3cpath%20d='M69.5154%20125.998C94.656%20125.998%20115.036%20105.647%20115.036%2080.5433C115.036%2055.4392%2094.656%2035.0884%2069.5154%2035.0884C44.3748%2035.0884%2023.9944%2055.4392%2023.9944%2080.5433C23.9944%20105.647%2044.3748%20125.998%2069.5154%20125.998Z'%20fill='%23FFD653'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M98.4573%2093.0337C91.9477%20126.29%2049.8065%20127.452%2040.5743%2093.1789L98.4573%2093.0337Z'%20fill='%23FC4B3B'%20stroke='black'%20stroke-width='1.8'%20stroke-miterlimit='10'/%3e%3cpath%20d='M96.459%2099.8592C97.2996%2097.7564%2097.9774%2095.4851%2098.4573%2093.0337L40.5743%2093.1789C41.2229%2095.5809%2042.0345%2097.8028%2042.9827%2099.8592H96.459Z'%20fill='%23F5F3F3'%20stroke='black'%20stroke-width='1.8'%20stroke-miterlimit='10'/%3e%3cpath%20d='M92.2001%2082.0862C94.2565%2083.0215%2096.1239%2084.1136%2097.7499%2085.2899C100.976%2082.4435%20103.012%2078.2814%20103.012%2073.6458C103.012%2065.0631%2096.0454%2058.1069%2087.4502%2058.1069C78.855%2058.1069%2071.8887%2065.0631%2071.8887%2073.6458C71.8887%2076.5532%2072.5303%2077.3866%2073.9207%2079.7131C79.0601%2078.9789%2084.4891%2078.5776%2092.1972%2082.0862H92.2001Z'%20fill='white'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M45.8091%2082.211C43.7526%2083.1462%2041.8853%2084.2383%2040.2593%2085.4146C37.0336%2082.5682%2034.9975%2078.4061%2034.9975%2073.7706C34.9975%2065.1879%2041.9638%2058.2317%2050.559%2058.2317C59.1542%2058.2317%2066.1205%2065.1879%2066.1205%2073.7706C66.1205%2076.678%2065.0321%2077.3866%2063.6417%2079.7131C57.768%2079.7131%2053.52%2078.7024%2045.812%2082.211H45.8091Z'%20fill='white'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M53.2267%2078.9457C55.556%2078.9457%2057.4443%2077.0601%2057.4443%2074.7342C57.4443%2072.4082%2055.556%2070.5227%2053.2267%2070.5227C50.8974%2070.5227%2049.0091%2072.4082%2049.0091%2074.7342C49.0091%2077.0601%2050.8974%2078.9457%2053.2267%2078.9457Z'%20fill='black'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M84.6401%2078.9457C86.9694%2078.9457%2088.8577%2077.0601%2088.8577%2074.7342C88.8577%2072.4082%2086.9694%2070.5227%2084.6401%2070.5227C82.3107%2070.5227%2080.4225%2072.4082%2080.4225%2074.7342C80.4225%2077.0601%2082.3107%2078.9457%2084.6401%2078.9457Z'%20fill='black'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3crect%20x='-1.32382'%20y='0.497493'%20width='12.6842'%20height='15.621'%20transform='matrix(-0.910657%20-0.413164%20-0.413164%200.910657%2032.0445%2074.2646)'%20fill='%23542234'%20stroke='black'%20stroke-width='2'/%3e%3cpath%20d='M40.3776%2045.9933L46.0308%208.82446L72.6573%2035.3671L40.3776%2045.9933Z'%20fill='%2353926D'%20stroke='black'%20stroke-width='2'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M42.4732%2025.5636L43.4846%2018.914L54.072%2015.4286L58.8357%2020.1772L42.4732%2025.5636Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M40.6192%2037.7546L41.6305%2031.1049L62.8055%2024.1342L67.5691%2028.8828L40.6192%2037.7546Z'%20fill='white'/%3e%3cpath%20d='M40.3776%2045.9933L46.0308%208.82446L72.6573%2035.3671L40.3776%2045.9933Z'%20stroke='black'%20stroke-width='2'/%3e%3c/svg%3e",Ct={key:0,class:"modal"},yt={__name:"ConfirmModal",props:{confirmType:Number},emits:["closeConfirmModal"],setup(l,{emit:n}){const r=n,o=()=>{r("closeConfirmModal")};return(f,p)=>(x(),b("div",{class:"modal-background",onClick:o},[l.confirmType===0?(x(),b("div",Ct,[t("img",{src:Z,alt:"close",onClick:o}),p[0]||(p[0]=t("div",{class:"img-wrapper"},[t("img",{src:xt,alt:"imoji"}),t("div",{class:"title-text"},"Hmm!"),t("div",{class:"content-text"},"Wrong answer. Please try again.")],-1))])):T("",!0),l.confirmType===1?(x(),b("div",{key:1,class:"modal",onClick:o},[t("img",{src:Z,alt:"close",onClick:o}),p[1]||(p[1]=t("div",{class:"img-wrapper"},[t("img",{src:kt,alt:"imoji"}),t("div",{class:"title-text"},"Yay!"),t("div",{class:"content-text"},"You successfully solved the problem.")],-1))])):T("",!0)]))}},bt=N(yt,[["__scopeId","data-v-0c8a23dd"]]);let _,B,y={Game:void 0,GameFrontend:void 0,Award:void 0,Badge:void 0};const J={gasPrice:"100000000001"};async function O(l){if(!_)try{_=new st(l)}catch(n){console.log(n),_=new at(L.rpcUrl)}console.log(_),B=await _.getSigner(),y.Game||(y.Game=new P(L.contracts.Game,ct.abi,_)),y.GameFrontend||(y.GameFrontend=new P(L.contracts.GameFrontend,ft.abi,_)),y.Award||(y.Award=new P(L.contracts.Award,pt.abi,_)),y.Badge||(y.Badge=new P(L.contracts.Badge,vt.abi,_))}function _t(l){return new Promise(n=>setTimeout(n,l))}async function R(l){for(let r=0;r<10;r++){const o=await _.getTransactionReceipt(l);if(o)return o.status==1;await _t(1e3)}return!1}async function $t(l,n){await O(l);let r=await y.Award.connect(B).allowance(B.address,await y.Game.getAddress());if(console.log(r),r<n)try{let o=await y.Award.connect(B).approve(await y.Game.getAddress(),mt,{...J});return await R(o.hash),o}catch(o){console.error(o);return}}async function Mt(l,n,r,o){await O(l),console.log(n),console.log(r),console.log(o);try{let f=await y.Game.connect(B).mint(n,r,o,{...J});return await R(f.hash),f}catch(f){console.error(f);return}}async function Dt(l,n,r){await O(l);const o=X("0x"+n.toString(16),32),f=I(j(`${r}`));let p;{const u=tt.defaultAbiCoder().encode(["bytes32","bytes32"],[o,f]);p=await B.signMessage(et(I(u)))}const c={tokenId:n.toString(),secretHash:f,user:B.address,sig:p},h="https://ib9fm6yjjg.execute-api.ap-northeast-2.amazonaws.com/ctp/ctp/submit-secret";try{const u=await(await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).json();return console.log(u.status),console.log(u.hash),{status:u.status,hash:u.hash}}catch(g){return console.error("Error:",g),{status:!1,hash:""}}}const St={class:"modal"},Tt={class:"modal-container"},At={class:"modal-wrapper"},Bt={class:"modal-info"},Ut={class:"modal-info-top"},Ft=["src"],Lt={class:"modal-info-title-wrapper"},It={class:"title-wrapper"},Vt={class:"title-text"},Pt={class:"type-wrapper"},Gt={class:"type-text"},Zt={class:"title-description"},Nt={class:"modal-info-bottom"},jt={class:"details-title-wrapper"},Ht={class:"details-content-text"},qt={class:"details-title-wrapper"},Ot={class:"details-content-text"},Et={class:"details-title-wrapper"},zt={class:"details-content-text"},Wt={class:"details-title-wrapper"},Jt={class:"details-award-text"},Rt={class:"bottom-wrapper"},Yt={class:"question-wrapper"},Qt={class:"question-content-wrapper"},Kt={class:"answer-wrapper"},Xt={class:"answer-content-input"},te={class:"pk-wrapper"},ee={class:"pk-content-wrapper"},se={__name:"ChallengeModal",props:{nft:{type:Object,required:!0}},emits:["closeModal"],setup(l,{emit:n}){it(),ot();const{walletProvider:r}=z(),{address:o,chainId:f,isConnected:p}=W(),c=k(null),h=l,g=n,u=k(""),D=k(""),A=k(""),V=async()=>{const e="https://ib9fm6yjjg.execute-api.ap-northeast-2.amazonaws.com/ctp/ctp/qa",s={token_id:h.nft.id.toString(),user:o.value,prompt_hash:h.nft.promptHash,question:u.value};try{const S=await(await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();console.log(S.message),D.value=S.message}catch(C){console.error("Error:",C)}},U=async()=>{const{status:e,hash:s}=await Dt(r.value,h.nft.tokenId,A.value);e?c.value=1:c.value=0},F=()=>{g("closeModal")},d=()=>{const e=c.value;c.value="",g("closeConfirmModal"),e===1&&g("closeModal")},a=e=>{const s=new Date(e*1e3),C=String(s.getUTCMonth()+1).padStart(2,"0"),S=String(s.getUTCDate()).padStart(2,"0"),E=s.getUTCHours(),Y=String(s.getUTCMinutes()).padStart(2,"0"),Q=E>=12?"PM":"AM",K=E%12||12;return`${C}.${S} ${K}:${Y} ${Q}`},i=(e,s)=>{const S=(s-e)/(60*60*24);return Math.round(S)},w=e=>(e/1e18).toFixed(2);return(e,s)=>(x(),b(H,null,[t("div",St,[t("div",Tt,[s[14]||(s[14]=t("div",{class:"modal-title-text"},"Challenge",-1)),t("div",At,[t("div",{class:"close-wrapper"},[t("img",{src:Z,alt:"close",onClick:F})]),t("div",Bt,[t("div",Ut,[t("img",{src:l.nft.imageUri||"@/assets/nft/0.png",alt:"nft"},null,8,Ft),t("div",Lt,[s[4]||(s[4]=t("div",{class:"live-wrapper"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},[t("circle",{cx:"6",cy:"6.02026",r:"5.5",fill:"#53926D"})]),t("div",{class:"live-text"},"Live")],-1)),t("div",It,[t("div",Vt,m(l.nft.name),1),t("div",Pt,[t("div",Gt,m(l.nft.gameType),1)]),t("div",Zt,m(l.nft.description),1)])])]),t("div",Nt,[t("div",jt,[s[5]||(s[5]=t("div",{class:"details-title-text"},"Start Date",-1)),t("div",Ht,m(a(l.nft.startDate)),1)]),t("div",qt,[s[6]||(s[6]=t("div",{class:"details-title-text"},"End Date",-1)),t("div",Ot,m(a(l.nft.endDate)),1)]),t("div",Et,[s[7]||(s[7]=t("div",{class:"details-title-text"},"Remaining",-1)),t("div",zt,m(i(l.nft.startDate,l.nft.endDate))+" days ",1)]),t("div",Wt,[s[8]||(s[8]=t("div",{class:"details-award-text"},"Awards",-1)),t("div",Jt,m(w(l.nft.awards))+" USDC ",1)])])]),t("div",Rt,[t("div",Yt,[s[10]||(s[10]=t("div",{class:"question-title-text"},"Question",-1)),t("div",Qt,[$(t("textarea",{class:"question-content-input",type:"text","onUpdate:modelValue":s[0]||(s[0]=C=>u.value=C)},null,512),[[M,u.value]]),t("div",{class:"submit-btn",onClick:s[1]||(s[1]=C=>V())},s[9]||(s[9]=[t("div",{class:"submit-text"},"Submit",-1)]))])]),t("div",Kt,[s[11]||(s[11]=t("div",{class:"answer-title-text"},"Answer",-1)),t("div",Xt,m(D.value),1)]),t("div",te,[s[13]||(s[13]=t("div",{class:"pk-title-text"},"Secret",-1)),t("div",ee,[$(t("textarea",{class:"pk-content-input",type:"text","onUpdate:modelValue":s[2]||(s[2]=C=>A.value=C)},null,512),[[M,A.value]]),t("div",{class:"submit-btn",onClick:s[3]||(s[3]=C=>U())},s[12]||(s[12]=[t("div",{class:"submit-text"},"Submit",-1)]))])])])])])]),c.value===0||c.value===1?(x(),G(bt,{key:0,confirmType:c.value,onCloseConfirmModal:d},null,8,["confirmType"])):T("",!0)],64))}},ae=N(se,[["__scopeId","data-v-dccf56dc"]]),ie={class:"modal"},oe={class:"modal-container"},le={class:"modal-wrapper"},ne={class:"content-wrapper"},re={class:"content-left-wrapper"},de={class:"name-wrapper"},ce={class:"description-wrapper"},fe={class:"date-wrapper"},pe={class:"date-input-wrapper"},ve={class:"date-wrapper"},ue={class:"date-input-wrapper"},me={class:"award-wrapper"},we={class:"award-input-wrapper"},he={class:"content-right-wrapper"},ge={class:"type-wrapper"},xe={class:"type-content-secret-wrapper"},ke={class:"description-wrapper"},Ce={class:"name-wrapper"},ye={__name:"CreateModal",emits:["closeCreateModal"],setup(l,{emit:n}){const r=n,o=k({name:"",description:"",award:"",gameType:"secret",prompt:"",secret:"",start:0,end:0,winner:q}),f=k(""),p=k(""),c=k(""),h=k(""),g=k(""),u=k(0),{walletProvider:D}=z(),{address:A,chainId:V,isConnected:U}=W(),F=()=>{r("closeCreateModal")},d=w=>{u.value=w},a=()=>{if(f.value===""||p.value==""||c.value==""||h.value==""||g.value==""||!U.value||!p.value.includes(c.value))return!1;const w=new Date(h.value).getTime()/1e3,e=new Date(g.value).getTime()/1e3;return!(w>=e)},i=async()=>{if(a()){o.value.start=new Date(h.value).getTime()/1e3,o.value.end=new Date(g.value).getTime()/1e3,o.value.prompt=I(j(p.value)),o.value.secret=I(I(j(c.value)));const w=lt(f.value.toString(),18);await wt(o.value.prompt,p.value,o.value.secret,c.value),await $t(D.value,w),await Mt(D.value,A.value,o.value,w)}};return(w,e)=>(x(),b("div",ie,[t("div",oe,[e[23]||(e[23]=t("div",{class:"title-text"},"Get started with a CTP",-1)),t("div",le,[t("div",{class:"close-wrapper"},[t("img",{src:Z,alt:"close",onClick:F})]),e[22]||(e[22]=t("div",{class:"about-wrapper"},[t("div",{class:"about-text"},"Create A New Challenge")],-1)),t("div",ne,[t("div",re,[t("div",de,[e[8]||(e[8]=t("div",{class:"name-text"},"Name",-1)),$(t("input",{class:"name-input","onUpdate:modelValue":e[0]||(e[0]=s=>o.value.name=s),placeholder:"Name",type:"text"},null,512),[[M,o.value.name]])]),t("div",ce,[e[9]||(e[9]=t("div",{class:"description-text"},"Description",-1)),$(t("textarea",{class:"description-input","onUpdate:modelValue":e[1]||(e[1]=s=>o.value.description=s),placeholder:"Description"},null,512),[[M,o.value.description]])]),t("div",fe,[e[10]||(e[10]=t("div",{class:"date-text"},"Start Date",-1)),t("div",pe,[$(t("input",{class:"date-input","onUpdate:modelValue":e[2]||(e[2]=s=>h.value=s),type:"datetime-local"},null,512),[[M,h.value]])])]),t("div",ve,[e[11]||(e[11]=t("div",{class:"date-text"},"End Date",-1)),t("div",ue,[$(t("input",{class:"date-input","onUpdate:modelValue":e[3]||(e[3]=s=>g.value=s),type:"datetime-local"},null,512),[[M,g.value]])])]),t("div",me,[e[13]||(e[13]=t("div",{class:"award-text"},"Award",-1)),t("div",we,[$(t("input",{class:"award-input","onUpdate:modelValue":e[4]||(e[4]=s=>f.value=s),type:"number"},null,512),[[M,f.value]]),e[12]||(e[12]=t("div",{class:"usdc-wrapper"},[t("div",{class:"usdc-text"},"USDC")],-1))])])]),t("div",he,[t("div",ge,[e[17]||(e[17]=t("div",{class:"type-text"},"Type",-1)),t("div",xe,[t("div",{class:v(["type-content-wrapper",{"is-type-active":u.value==0}]),onClick:e[5]||(e[5]=s=>d(0))},e[14]||(e[14]=[t("div",{class:"type-content-text"},"Secret",-1)]),2),t("div",{class:v(["type-content-wrapper",{"is-type-active":u.value==1}])},e[15]||(e[15]=[t("div",{class:"type-content-text"},"Slang",-1)]),2),t("div",{class:v(["type-content-wrapper",{"is-type-active":u.value==2}])},e[16]||(e[16]=[t("div",{class:"type-content-text"},"Mismatch",-1)]),2)])]),t("div",ke,[e[18]||(e[18]=t("div",{class:"description-text"},"Prompt",-1)),$(t("textarea",{class:"prompt-input","onUpdate:modelValue":e[6]||(e[6]=s=>p.value=s),placeholder:"Prompt"},null,512),[[M,p.value]])]),t("div",Ce,[e[19]||(e[19]=t("div",{class:"name-text"},"Secret",-1)),$(t("input",{class:"name-input","onUpdate:modelValue":e[7]||(e[7]=s=>c.value=s),placeholder:"Secret",type:"text"},null,512),[[M,c.value]])]),t("div",{class:"submit-wrapper"},[e[21]||(e[21]=t("div",{class:"empty-text"},null,-1)),t("div",{class:"submit-btn-wrapper",onClick:i},e[20]||(e[20]=[t("div",{class:"submit-btn-text"},"Submit",-1)]))])])])])])]))}},be=N(ye,[["__scopeId","data-v-99ad3ca0"]]),_e={key:0,class:"challenge"},$e={class:"challenge-wrapper"},Me={class:"challenge-live-filter"},De={class:"challenge-type-filter-wrapper"},Se={class:"challenge-type-filter"},Te={class:"nfts"},Ae={class:"nft-content-wrapper"},Be={class:"nft-content-top-wrapper"},Ue=["src"],Fe={class:"nft-content-top-title-wrapper"},Le={class:"live-wrapper"},Ie={key:0,xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},Ve=["fill"],Pe={key:1,xmlns:"http://www.w3.org/2000/svg",width:"19",height:"19",viewBox:"0 0 19 19",fill:"none"},Ge={class:"live-text"},Ze={class:"live-title-wrapper"},Ne={class:"live-title-text"},je={class:"type-wrapper"},He={class:"type-text"},qe={class:"nft-description"},Oe={class:"nft-date-wrapper"},Ee={class:"nft-date-content-wrapper"},ze={class:"nft-date-content-text"},We={class:"nft-date-content-text"},Je={class:"nft-duration-wrapper"},Re={class:"nft-duration-content-text"},Ye={class:"nft-award-wrapper"},Qe=["onClick"],Ke={class:"nft-btn-text"},Xe={class:"pagination"},ts={class:"pagination-wrapper"},es={class:"number-wrapper"},ss={__name:"ChallengePage",setup(l){const n=k(!1),r=k(!1),o=k(null),f=k([]),p=d=>{d.status==="Live"&&(o.value=d,n.value=!0)},c=()=>{n.value=!1},h=()=>{r.value=!0},g=()=>{r.value=!1},u=async()=>{const d=await ut(0,1e3);f.value=d.map(a=>{const i=a[11],w=Math.floor(Date.now()/1e3);console.log(i);let e="Live";return i.toLowerCase()==="0xffffffffffffffffffffffffffffffffffffffff"||i===q&&w>Number(a[9])?e="Verified":i!==q&&(e="Solved"),{status:e,winnerAddress:i,id:a[0],tokenId:a[1],name:a[2],description:a[3],gameType:a[4],promptHash:a[5],secretHash:a[6],imageUri:a[7],startDate:Number(a[8]),endDate:Number(a[9]),awards:Number(a[10])}}).reverse(),console.log(f.value)},D=d=>{const a=new Date(d*1e3),i=String(a.getUTCMonth()+1).padStart(2,"0"),w=String(a.getUTCDate()).padStart(2,"0"),e=a.getUTCHours(),s=String(a.getUTCMinutes()).padStart(2,"0"),C=e>=12?"PM":"AM",S=e%12||12;return`${i}.${w} ${S}:${s} ${C}`},A=(d,a)=>{const w=(a-d)/(60*60*24);return Math.round(w)},V=d=>dt(d.toLocaleString("fullwide",{useGrouping:!1}),18),U=d=>d&&`Winner: ${d.slice(0,6)}...${d.slice(-4)}`,F=d=>d.length>96?`${d.slice(0,96)}...`:d;return nt(()=>{u()}),(d,a)=>(x(),b(H,null,[!n.value&&!r.value?(x(),b("div",_e,[t("div",$e,[a[9]||(a[9]=t("div",{class:"challenge-title-text"},"Challenges",-1)),t("div",Me,[t("div",{class:v(["challenge-live-filter-btn",{"is-live-active":!0}])}," All "),t("div",{class:v(["challenge-live-filter-btn",{"is-live-active":!1}])}," Live "),t("div",{class:v(["challenge-live-filter-btn",{"is-live-active":!1}])}," End ")]),t("div",De,[t("div",Se,[t("div",{class:v(["challenge-type-filter-btn",{"is-type-active":!0}])},[t("div",{class:v(["challenge-type-filter-btn-text",{"is-type-text-active":!0}])}," All Type ")]),t("div",{class:v(["challenge-type-filter-btn",{"is-type-active":!1}])},[t("div",{class:v(["challenge-type-filter-btn-text",{"is-type-text-active":!1}])}," Secret ")]),t("div",{class:v(["challenge-type-filter-btn",{"is-type-active":!1}])},[t("div",{class:v(["challenge-type-filter-btn-text",{"is-type-text-active":!1}])}," Slang ")]),t("div",{class:v(["challenge-type-filter-btn",{"is-type-active":!1}])},[t("div",{class:v(["challenge-type-filter-btn-text",{"is-type-text-active":!1}])}," Mismatch ")])]),t("div",{class:"challenge-create-new-btn",onClick:h}," + Create A New Challange ")]),t("div",Te,[(x(!0),b(H,null,rt(f.value,(i,w)=>(x(),b("div",{key:i.id,class:v(["nft-wrapper",{"is-verified-nft":i.status==="Verified"}])},[t("div",Ae,[t("div",Be,[t("img",{src:i.imageUri?i.imageUri:"@/assets/nft/0.png",alt:"nft"},null,8,Ue),t("div",Fe,[t("div",Le,[i.status!=="Verified"?(x(),b("svg",Ie,[t("circle",{cx:"6",cy:"6.02026",r:"5.5",fill:i.status==="Live"?"#53926D":"#CC0000"},null,8,Ve)])):T("",!0),i.status==="Verified"?(x(),b("svg",Pe,a[0]||(a[0]=[t("circle",{cx:"9.5",cy:"9.5",r:"8",fill:"#4DC4CF",stroke:"black","stroke-width":"2"},null,-1),t("rect",{x:"3.5",y:"7.91431",width:"2",height:"8.48528",transform:"rotate(-45 3.5 7.91431)",fill:"black"},null,-1),t("rect",{width:"2",height:"8.48563",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 15.5 7.91431)",fill:"black"},null,-1)]))):T("",!0),t("div",Ge,m(i.status),1)]),t("div",Ze,[t("div",Ne,m(i.name),1),t("div",je,[t("div",He,m(i.gameType),1)])])])]),t("div",qe,m(F(i.description)),1),t("div",Oe,[a[1]||(a[1]=t("div",{class:"nft-date-text"},"Date",-1)),t("div",Ee,[t("div",ze,m(D(i.startDate)),1),t("div",We," ~ "+m(D(i.endDate)),1)])]),t("div",Je,[a[2]||(a[2]=t("div",{class:"nft-duration-text"},"Remaining",-1)),t("div",Re,m(A(i.startDate,i.endDate))+" days ",1)]),t("div",Ye,[t("div",{class:v(["nft-award-text",{"is-verified-nft-text":i.status==="Verified"}])}," Award ",2),t("div",{class:v(["nft-award-content-text",{"is-verified-nft-text":i.status==="Verified","is-solved-nft-text":i.status==="Solved"}])},m(V(i.awards))+" USDC ",3)])]),t("div",{class:v(["nft-btn",{"is-live":i.status==="Live","is-verified":i.status==="Verified"}]),onClick:e=>i.status!=="Solved"&&p(i)},[t("div",Ke,m(i.status==="Solved"?U(i.winnerAddress):i.status==="Verified"?"Verified":"Challenge"),1)],10,Qe)],2))),128))]),t("div",Xe,[t("div",ts,[a[7]||(a[7]=t("img",{src:ht,alt:"left"},null,-1)),t("div",es,[t("div",{class:v(["number-text",{"is-pagination-active":!0}])}," 1 "),a[3]||(a[3]=t("div",{class:"number-text"},"2",-1)),a[4]||(a[4]=t("div",{class:"number-text"},"3",-1)),a[5]||(a[5]=t("div",{class:"number-text"},"4",-1)),a[6]||(a[6]=t("div",{class:"number-text"},"5",-1))]),a[8]||(a[8]=t("img",{src:gt,alt:"right"},null,-1))])])])])):T("",!0),n.value?(x(),G(ae,{key:1,nft:o.value,onCloseModal:c},null,8,["nft"])):T("",!0),r.value?(x(),G(be,{key:2,onCloseCreateModal:g})):T("",!0)],64))}},as=N(ss,[["__scopeId","data-v-d2e49d7c"]]),ls={__name:"ChallengeView",setup(l){return(n,r)=>(x(),G(as))}};export{ls as default};
