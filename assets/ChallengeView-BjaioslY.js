import{_ as H,o as u,c as y,a as t,t as k,b as _,F as Z,r as J,n as st,z as ct,k as E,d as K,A as ft,g as ut,B as vt,J as pt,e as O,C as W,u as mt,f as wt,h as at,i as lt,j as g,w as A,v as U,l as I,m as h,Z as X,p as gt,q as Y,s as ht,x as kt,y as yt}from"./index-D48m4Znv.js";import{G as Ct,a as xt,U as _t,B as bt,g as $t}from"./gameView-CcjVPnJp.js";BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");BigInt("1000000000000000000");const Mt=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("0x8000000000000000000000000000000000000000000000000000000000000000")*BigInt(-1);BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");async function Dt(n,c,r,i){const v="https://ib9fm6yjjg.execute-api.ap-northeast-2.amazonaws.com/ctp/ctp/create-prompt",d={prompt_hash:n,prompt:c,secret_hash:r,secret:i};try{const w=await(await fetch(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})).json();console.log(w.message)}catch(o){console.error("Error:",o)}}const St="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='11'%20height='18'%20viewBox='0%200%2011%2018'%20fill='none'%3e%3crect%20x='8.59265'%20y='0.928223'%20width='2.69743'%20height='11.4442'%20transform='rotate(45%208.59265%200.928223)'%20fill='black'/%3e%3crect%20width='2.69743'%20height='11.4447'%20transform='matrix(0.707107%20-0.707107%20-0.707107%20-0.707107%208.59265%2017.1123)'%20fill='black'/%3e%3c/svg%3e",Tt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='11'%20height='18'%20viewBox='0%200%2011%2018'%20fill='none'%3e%3crect%20width='2.69743'%20height='11.4442'%20transform='matrix(-0.707107%200.707107%200.707107%200.707107%202.40735%200.928223)'%20fill='black'/%3e%3crect%20x='2.40735'%20y='17.1123'%20width='2.69743'%20height='11.4447'%20transform='rotate(-135%202.40735%2017.1123)'%20fill='black'/%3e%3c/svg%3e",R="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='21'%20height='21'%20viewBox='0%200%2021%2021'%20fill='none'%3e%3ccircle%20cx='10.5'%20cy='10.0203'%20r='9'%20fill='%234DC4CF'%20stroke='black'%20stroke-width='2'/%3e%3cline%20x1='6.44978'%20y1='5.07048'%20x2='15.6422'%20y2='14.2629'%20stroke='black'%20stroke-width='2'/%3e%3cline%20x1='5.7426'%20y1='14.2629'%20x2='14.935'%20y2='5.07048'%20stroke='black'%20stroke-width='2'/%3e%3c/svg%3e",At="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='103'%20height='102'%20viewBox='0%200%20103%20102'%20fill='none'%3e%3cpath%20d='M51.5%20100.855C79.1144%20100.855%20101.5%2078.502%20101.5%2050.9277C101.5%2023.3534%2079.1144%201%2051.5%201C23.8856%201%201.49969%2023.3534%201.49969%2050.9277C1.49969%2078.502%2023.8856%20100.855%2051.5%20100.855Z'%20fill='%23FFCF36'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M31.692%2062.891C41.1321%2062.891%2048.7848%2055.2494%2048.7848%2045.8231C48.7848%2036.3967%2041.1321%2028.7551%2031.692%2028.7551C22.252%2028.7551%2014.5993%2036.3967%2014.5993%2045.8231C14.5993%2055.2494%2022.252%2062.891%2031.692%2062.891Z'%20fill='white'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M31.6922%2038.0069C34.2507%2038.0069%2036.3248%2035.9358%2036.3248%2033.381C36.3248%2030.8262%2034.2507%2028.7551%2031.6922%2028.7551C29.1336%2028.7551%2027.0595%2030.8262%2027.0595%2033.381C27.0595%2035.9358%2029.1336%2038.0069%2031.6922%2038.0069Z'%20fill='black'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M72.5866%2062.891C82.0267%2062.891%2089.6794%2055.2494%2089.6794%2045.8231C89.6794%2036.3967%2082.0267%2028.7551%2072.5866%2028.7551C63.1466%2028.7551%2055.4939%2036.3967%2055.4939%2045.8231C55.4939%2055.2494%2063.1466%2062.891%2072.5866%2062.891Z'%20fill='white'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M72.5867%2038.0069C75.1452%2038.0069%2077.2193%2035.9358%2077.2193%2033.381C77.2193%2030.8262%2075.1452%2028.7551%2072.5867%2028.7551C70.0282%2028.7551%2067.9541%2030.8262%2067.9541%2033.381C67.9541%2035.9358%2070.0282%2038.0069%2072.5867%2038.0069Z'%20fill='black'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M51.9997%2076H72.7666'%20stroke='black'%20stroke-width='1.79'%20stroke-miterlimit='10'/%3e%3c/svg%3e",Ut="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='145'%20height='127'%20viewBox='0%200%20145%20127'%20fill='none'%3e%3crect%20x='1.82382'%20y='47.3644'%20width='12.6842'%20height='15.621'%20transform='rotate(-24.4037%201.82382%2047.3644)'%20fill='%23D9D9D9'%20stroke='black'%20stroke-width='2'/%3e%3crect%20x='1.82382'%20y='104.633'%20width='12.6842'%20height='15.621'%20transform='rotate(-24.4037%201.82382%20104.633)'%20fill='%23FFCF36'%20stroke='black'%20stroke-width='2'/%3e%3crect%20x='125.171'%20y='79.6696'%20width='12.6842'%20height='15.621'%20transform='rotate(-24.4037%20125.171%2079.6696)'%20fill='%2353926D'%20stroke='black'%20stroke-width='2'/%3e%3crect%20x='111.286'%20y='43.5991'%20width='12.6842'%20height='15.621'%20transform='rotate(25.255%20111.286%2043.5991)'%20fill='%23FC4B3B'%20stroke='black'%20stroke-width='2'/%3e%3crect%20x='108.722'%20y='100.918'%20width='12.6842'%20height='15.621'%20transform='rotate(-1.59917%20108.722%20100.918)'%20fill='%23D9D9D9'%20stroke='black'%20stroke-width='2'/%3e%3crect%20x='72.2731'%20y='14.2661'%20width='12.6842'%20height='15.621'%20transform='rotate(-20.6967%2072.2731%2014.2661)'%20fill='%234DC4CF'%20stroke='black'%20stroke-width='2'/%3e%3cpath%20d='M69.5154%20125.998C94.656%20125.998%20115.036%20105.647%20115.036%2080.5433C115.036%2055.4392%2094.656%2035.0884%2069.5154%2035.0884C44.3748%2035.0884%2023.9944%2055.4392%2023.9944%2080.5433C23.9944%20105.647%2044.3748%20125.998%2069.5154%20125.998Z'%20fill='%23FFD653'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M98.4573%2093.0337C91.9477%20126.29%2049.8065%20127.452%2040.5743%2093.1789L98.4573%2093.0337Z'%20fill='%23FC4B3B'%20stroke='black'%20stroke-width='1.8'%20stroke-miterlimit='10'/%3e%3cpath%20d='M96.459%2099.8592C97.2996%2097.7564%2097.9774%2095.4851%2098.4573%2093.0337L40.5743%2093.1789C41.2229%2095.5809%2042.0345%2097.8028%2042.9827%2099.8592H96.459Z'%20fill='%23F5F3F3'%20stroke='black'%20stroke-width='1.8'%20stroke-miterlimit='10'/%3e%3cpath%20d='M92.2001%2082.0862C94.2565%2083.0215%2096.1239%2084.1136%2097.7499%2085.2899C100.976%2082.4435%20103.012%2078.2814%20103.012%2073.6458C103.012%2065.0631%2096.0454%2058.1069%2087.4502%2058.1069C78.855%2058.1069%2071.8887%2065.0631%2071.8887%2073.6458C71.8887%2076.5532%2072.5303%2077.3866%2073.9207%2079.7131C79.0601%2078.9789%2084.4891%2078.5776%2092.1972%2082.0862H92.2001Z'%20fill='white'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M45.8091%2082.211C43.7526%2083.1462%2041.8853%2084.2383%2040.2593%2085.4146C37.0336%2082.5682%2034.9975%2078.4061%2034.9975%2073.7706C34.9975%2065.1879%2041.9638%2058.2317%2050.559%2058.2317C59.1542%2058.2317%2066.1205%2065.1879%2066.1205%2073.7706C66.1205%2076.678%2065.0321%2077.3866%2063.6417%2079.7131C57.768%2079.7131%2053.52%2078.7024%2045.812%2082.211H45.8091Z'%20fill='white'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M53.2267%2078.9457C55.556%2078.9457%2057.4443%2077.0601%2057.4443%2074.7342C57.4443%2072.4082%2055.556%2070.5227%2053.2267%2070.5227C50.8974%2070.5227%2049.0091%2072.4082%2049.0091%2074.7342C49.0091%2077.0601%2050.8974%2078.9457%2053.2267%2078.9457Z'%20fill='black'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3cpath%20d='M84.6401%2078.9457C86.9694%2078.9457%2088.8577%2077.0601%2088.8577%2074.7342C88.8577%2072.4082%2086.9694%2070.5227%2084.6401%2070.5227C82.3107%2070.5227%2080.4225%2072.4082%2080.4225%2074.7342C80.4225%2077.0601%2082.3107%2078.9457%2084.6401%2078.9457Z'%20fill='black'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'/%3e%3crect%20x='-1.32382'%20y='0.497493'%20width='12.6842'%20height='15.621'%20transform='matrix(-0.910657%20-0.413164%20-0.413164%200.910657%2032.0445%2074.2646)'%20fill='%23542234'%20stroke='black'%20stroke-width='2'/%3e%3cpath%20d='M40.3776%2045.9933L46.0308%208.82446L72.6573%2035.3671L40.3776%2045.9933Z'%20fill='%2353926D'%20stroke='black'%20stroke-width='2'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M42.4732%2025.5636L43.4846%2018.914L54.072%2015.4286L58.8357%2020.1772L42.4732%2025.5636Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M40.6192%2037.7546L41.6305%2031.1049L62.8055%2024.1342L67.5691%2028.8828L40.6192%2037.7546Z'%20fill='white'/%3e%3cpath%20d='M40.3776%2045.9933L46.0308%208.82446L72.6573%2035.3671L40.3776%2045.9933Z'%20stroke='black'%20stroke-width='2'/%3e%3c/svg%3e",Bt={key:0,class:"modal"},Lt={class:"img-wrapper"},It={class:"content-text"},Pt={class:"img-wrapper"},Ft={class:"content-text"},Nt={__name:"ConfirmModal",props:{confirmType:Number,message:String},emits:["closeConfirmModal"],setup(n,{emit:c}){const r=c,i=()=>{r("closeConfirmModal")};return(v,d)=>(u(),y("div",{class:"modal-background",onClick:i},[n.confirmType===0?(u(),y("div",Bt,[t("img",{src:R,alt:"close",onClick:i}),t("div",Lt,[d[0]||(d[0]=t("img",{src:At,alt:"imoji"},null,-1)),d[1]||(d[1]=t("div",{class:"title-text"},"Hmm!",-1)),t("div",It,k(n.message),1)])])):_("",!0),n.confirmType===1?(u(),y("div",{key:1,class:"modal",onClick:i},[t("img",{src:R,alt:"close",onClick:i}),t("div",Pt,[d[2]||(d[2]=t("img",{src:Ut,alt:"imoji"},null,-1)),d[3]||(d[3]=t("div",{class:"title-text"},"Yay!",-1)),t("div",Ft,k(n.message),1)])])):_("",!0)]))}},it=H(Nt,[["__scopeId","data-v-bb420b1f"]]),Vt={},Gt={class:"loading-container"};function Zt(n,c){return u(),y("div",Gt,[(u(),y(Z,null,J(5,r=>t("div",{key:r,class:"dot",style:st({"animation-delay":`${r*.2}s`})},null,4)),64))])}const jt=H(Vt,[["render",Zt],["__scopeId","data-v-2b22a387"]]),Ht={},qt={class:"loading-container"};function zt(n,c){return u(),y("div",qt,[(u(),y(Z,null,J(3,r=>t("div",{key:r,class:"dot",style:st({"animation-delay":`${r*.2}s`})},null,4)),64))])}const nt=H(Ht,[["render",zt],["__scopeId","data-v-c198beeb"]]);let T,j,$={Game:void 0,GameFrontend:void 0,Award:void 0,Badge:void 0};async function tt(n){if(!T)try{T=new vt(n)}catch(c){console.log(c),T=new pt(O.rpcUrl)}console.log(T),j=await T.getSigner(),$.Game||($.Game=new W(O.contracts.Game,Ct.abi,T)),$.GameFrontend||($.GameFrontend=new W(O.contracts.GameFrontend,xt.abi,T)),$.Award||($.Award=new W(O.contracts.Award,_t.abi,T)),$.Badge||($.Badge=new W(O.contracts.Badge,bt.abi,T))}function Ot(n){return new Promise(c=>setTimeout(c,n))}async function et(n,c=2e3,r=10){for(let i=0;i<r;i++){const v=await T.getTransactionReceipt(n);if(v)return v.status===1;await Ot(c)}return!1}async function Et(n,c){await tt(n);let r=await $.Award.connect(j).allowance(j.address,await $.Game.getAddress());if(console.log(r),r<c)try{let i=await $.Award.connect(j).approve(await $.Game.getAddress(),Mt);return await et(i.hash),i}catch(i){console.error(i);return}}async function Wt(n,c,r,i){await tt(n),console.log(c),console.log(r),console.log(i);try{let v=await $.Game.connect(j).mint(c,r,i);return await et(v.hash),v}catch(v){console.error(v);return}}async function Jt(n,c,r){await tt(n),console.log("tokenId",c);let i=c.toString(16);i.length%2===1&&(i=`0${i}`);const v=ct("0x"+i,32);console.log("tokenIdHex:",v);const d=E(K(`${r}`));let o;{const p=ft.defaultAbiCoder().encode(["bytes32","bytes32"],[v,d]);o=await j.signMessage(ut(E(p)))}const w={tokenId:c.toString(),secretHash:d,user:j.address,sig:o},x="https://ib9fm6yjjg.execute-api.ap-northeast-2.amazonaws.com/ctp/ctp/submit-secret";try{const p=await(await fetch(x,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)})).json();return console.log(p.status),console.log(p.hash),p.hash&&await et(p.hash,5e3),{status:p.status,hash:p.hash}}catch(C){return console.error("Error:",C),{status:!1,hash:""}}}const Rt={class:"modal"},Yt={class:"modal-container"},Qt={class:"modal-wrapper"},Kt={class:"modal-info"},Xt={class:"modal-info-top"},te=["src"],ee={class:"modal-info-title-wrapper"},se={class:"title-wrapper"},ae={class:"title-text"},le={class:"type-wrapper"},ie={class:"type-text"},ne={class:"title-description"},oe={class:"modal-info-bottom"},re={class:"details-title-wrapper"},de={class:"details-content-text"},ce={class:"details-title-wrapper"},fe={class:"details-content-text"},ue={class:"details-title-wrapper"},ve={class:"details-content-text"},pe={class:"details-title-wrapper"},me={class:"details-award-text"},we={class:"bottom-wrapper"},ge={class:"question-wrapper"},he={class:"question-content-wrapper"},ke={class:"answer-wrapper"},ye={class:"answer-content-input"},Ce={key:1,class:"answer-content-input-text"},xe={class:"pk-wrapper"},_e={class:"pk-content-wrapper"},be={key:1,class:"submit-text"},$e={__name:"ChallengeModal",props:{nft:{type:Object,required:!0}},emits:["closeModal","updateNftsData"],setup(n,{emit:c}){mt(),wt();const{walletProvider:r}=at(),{address:i,chainId:v,isConnected:d}=lt(),o=g(null),w=g(""),x=g(!1),C=g(!1),p=n,b=c,M=g(""),P=g(""),F=g(""),N=async()=>{if(d.value&&!x.value){const m="https://ib9fm6yjjg.execute-api.ap-northeast-2.amazonaws.com/ctp/ctp/qa",e={token_id:p.nft.id.toString(),user:i.value,prompt_hash:p.nft.promptHash,question:M.value};try{x.value=!0;const l=await(await fetch(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();console.log(l.message),x.value=!1,P.value=l.message}catch(f){x.value=!1,console.error("Error:",f)}}},B=async()=>{if(d.value&&!C.value){C.value=!0;try{const{status:m,hash:e}=await Jt(r.value,p.nft.tokenId,F.value);m?(w.value="You successfully solved the problem. ",o.value=1,b("updateNftsData")):(w.value="Transaction reverted. Please try again.",o.value=0)}catch{w.value="Wrong answer. Please try again.",o.value=0}finally{C.value=!1}}},V=()=>{b("closeModal")},L=()=>{const m=o.value;o.value="",b("closeConfirmModal"),m===1&&b("closeModal")},G=m=>{const e=new Date(m*1e3),f=String(e.getUTCMonth()+1).padStart(2,"0"),l=String(e.getUTCDate()).padStart(2,"0"),s=e.getUTCHours(),a=String(e.getUTCMinutes()).padStart(2,"0"),D=s>=12?"PM":"AM",S=s%12||12;return`${f}.${l} ${S}:${a} ${D}`},q=(m,e)=>{const l=(e-m)/(60*60*24);return Math.round(l)},z=m=>(m/1e18).toFixed(2);return(m,e)=>(u(),y(Z,null,[t("div",Rt,[t("div",Yt,[e[13]||(e[13]=t("div",{class:"modal-title-text"},"Challenge",-1)),t("div",Qt,[t("div",{class:"close-wrapper"},[t("img",{src:R,alt:"close",onClick:V})]),t("div",Kt,[t("div",Xt,[t("img",{src:n.nft.imageUri||"@/assets/nft/0.png",alt:"nft"},null,8,te),t("div",ee,[e[4]||(e[4]=t("div",{class:"live-wrapper"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},[t("circle",{cx:"6",cy:"6.02026",r:"5.5",fill:"#53926D"})]),t("div",{class:"live-text"},"Live")],-1)),t("div",se,[t("div",ae,k(n.nft.name),1),t("div",le,[t("div",ie,k(n.nft.gameType),1)]),t("div",ne,k(n.nft.description),1)])])]),t("div",oe,[t("div",re,[e[5]||(e[5]=t("div",{class:"details-title-text"},"Start Date",-1)),t("div",de,k(G(n.nft.startDate)),1)]),t("div",ce,[e[6]||(e[6]=t("div",{class:"details-title-text"},"End Date",-1)),t("div",fe,k(G(n.nft.endDate)),1)]),t("div",ue,[e[7]||(e[7]=t("div",{class:"details-title-text"},"Remaining",-1)),t("div",ve,k(q(n.nft.startDate,n.nft.endDate))+" days ",1)]),t("div",pe,[e[8]||(e[8]=t("div",{class:"details-award-text"},"Awards",-1)),t("div",me,k(z(n.nft.awards))+" USDC ",1)])])]),t("div",we,[t("div",ge,[e[10]||(e[10]=t("div",{class:"question-title-text"},"Question",-1)),t("div",he,[A(t("textarea",{class:"question-content-input",type:"text","onUpdate:modelValue":e[0]||(e[0]=f=>M.value=f)},null,512),[[U,M.value]]),t("div",{class:"submit-btn",onClick:e[1]||(e[1]=f=>N())},e[9]||(e[9]=[t("div",{class:"submit-text"},"Submit",-1)]))])]),t("div",ke,[e[11]||(e[11]=t("div",{class:"answer-title-text"},"Answer",-1)),t("div",ye,[x.value?(u(),I(jt,{key:0})):_("",!0),x.value?_("",!0):(u(),y("div",Ce,k(P.value),1))])]),t("div",xe,[e[12]||(e[12]=t("div",{class:"pk-title-text"},"Secret",-1)),t("div",_e,[A(t("textarea",{class:"pk-content-input",type:"text","onUpdate:modelValue":e[2]||(e[2]=f=>F.value=f)},null,512),[[U,F.value]]),t("div",{class:h(["submit-btn",{"is-loading":C.value}]),onClick:e[3]||(e[3]=f=>B())},[C.value?(u(),I(nt,{key:0})):_("",!0),C.value?_("",!0):(u(),y("div",be,"Submit"))],2)])])])])])]),o.value===0||o.value===1?(u(),I(it,{key:0,confirmType:o.value,message:w.value,onCloseConfirmModal:L},null,8,["confirmType","message"])):_("",!0)],64))}},Me=H($e,[["__scopeId","data-v-f1c1a17e"]]),De={class:"modal"},Se={class:"modal-container"},Te={class:"modal-wrapper"},Ae={class:"content-wrapper"},Ue={class:"content-left-wrapper"},Be={class:"name-wrapper"},Le={class:"description-wrapper"},Ie={class:"date-wrapper"},Pe={class:"date-input-wrapper"},Fe={class:"date-wrapper"},Ne={class:"date-input-wrapper"},Ve={class:"award-wrapper"},Ge={class:"award-input-wrapper"},Ze={class:"content-right-wrapper"},je={class:"type-wrapper"},He={class:"type-content-secret-wrapper"},qe={class:"description-wrapper"},ze={class:"name-wrapper"},Oe={class:"submit-wrapper"},Ee={key:1,class:"submit-btn-text"},We={__name:"CreateModal",emits:["closeCreateModal","updateNftsData"],setup(n,{emit:c}){const r=c,i=g({name:"",description:"",award:"",gameType:"secret",prompt:"",secret:"",start:0,end:0,winner:X}),v=g(""),d=g(""),o=g(""),w=g(""),x=g(""),C=g(0),p=g(null),b=g(""),M=g(!1),{walletProvider:P}=at(),{address:F,chainId:N,isConnected:B}=lt(),V=()=>{r("closeCreateModal")},L=()=>{const m=p.value;p.value="",r("closeConfirmModal"),m===1&&r("closeCreateModal")},G=m=>{C.value=m},q=()=>{if(v.value===""||d.value==""||o.value==""||w.value==""||x.value=="")return p.value=0,b.value="Please enter all the data.",!1;if(!B.value)return p.value=0,b.value="Please connect your wallet.",!1;if(!d.value.includes(o.value))return p.value=0,b.value="The prompt does not contain a secret.",!1;const m=new Date(w.value).getTime()/1e3,e=new Date(x.value).getTime()/1e3;return m>=e?(p.value=0,b.value="The end time must be later than the start time.",!1):!0},z=async()=>{if(q()||!M.value)try{M.value=!0,i.value.start=new Date(w.value).getTime()/1e3,i.value.end=new Date(x.value).getTime()/1e3,i.value.prompt=E(K(d.value)),i.value.secret=E(E(K(o.value)));const m=gt(v.value.toString(),18);await Dt(i.value.prompt,d.value,i.value.secret,o.value),await Et(P.value,m),await Wt(P.value,F.value,i.value,m),b.value="You successfully registered the project.",p.value=1,r("updateNftsData")}catch{b.value="Transaction reverted. Please try again.",p.value=0}finally{M.value=!1}};return(m,e)=>(u(),y(Z,null,[t("div",De,[t("div",Se,[e[22]||(e[22]=t("div",{class:"title-text"},"Get started with a CTP",-1)),t("div",Te,[t("div",{class:"close-wrapper"},[t("img",{src:R,alt:"close",onClick:V})]),e[21]||(e[21]=t("div",{class:"about-wrapper"},[t("div",{class:"about-text"},"Create A New Challenge")],-1)),t("div",Ae,[t("div",Ue,[t("div",Be,[e[8]||(e[8]=t("div",{class:"name-text"},"Name",-1)),A(t("input",{class:"name-input","onUpdate:modelValue":e[0]||(e[0]=f=>i.value.name=f),placeholder:"Name",type:"text"},null,512),[[U,i.value.name]])]),t("div",Le,[e[9]||(e[9]=t("div",{class:"description-text"},"Description",-1)),A(t("textarea",{class:"description-input","onUpdate:modelValue":e[1]||(e[1]=f=>i.value.description=f),placeholder:"Description"},null,512),[[U,i.value.description]])]),t("div",Ie,[e[10]||(e[10]=t("div",{class:"date-text"},"Start Date",-1)),t("div",Pe,[A(t("input",{class:"date-input","onUpdate:modelValue":e[2]||(e[2]=f=>w.value=f),type:"datetime-local"},null,512),[[U,w.value]])])]),t("div",Fe,[e[11]||(e[11]=t("div",{class:"date-text"},"End Date",-1)),t("div",Ne,[A(t("input",{class:"date-input","onUpdate:modelValue":e[3]||(e[3]=f=>x.value=f),type:"datetime-local"},null,512),[[U,x.value]])])]),t("div",Ve,[e[13]||(e[13]=t("div",{class:"award-text"},"Award",-1)),t("div",Ge,[A(t("input",{class:"award-input","onUpdate:modelValue":e[4]||(e[4]=f=>v.value=f),type:"number"},null,512),[[U,v.value]]),e[12]||(e[12]=t("div",{class:"usdc-wrapper"},[t("div",{class:"usdc-text"},"USDC")],-1))])])]),t("div",Ze,[t("div",je,[e[17]||(e[17]=t("div",{class:"type-text"},"Type",-1)),t("div",He,[t("div",{class:h(["type-content-wrapper",{"is-type-active":C.value==0}]),onClick:e[5]||(e[5]=f=>G(0))},e[14]||(e[14]=[t("div",{class:"type-content-text"},"Secret",-1)]),2),t("div",{class:h(["type-content-wrapper",{"is-type-active":C.value==1}])},e[15]||(e[15]=[t("div",{class:"type-content-text"},"Slang",-1)]),2),t("div",{class:h(["type-content-wrapper",{"is-type-active":C.value==2}])},e[16]||(e[16]=[t("div",{class:"type-content-text"},"Mismatch",-1)]),2)])]),t("div",qe,[e[18]||(e[18]=t("div",{class:"description-text"},"Prompt",-1)),A(t("textarea",{class:"prompt-input","onUpdate:modelValue":e[6]||(e[6]=f=>d.value=f),placeholder:"Prompt"},null,512),[[U,d.value]])]),t("div",ze,[e[19]||(e[19]=t("div",{class:"name-text"},"Secret",-1)),A(t("input",{class:"name-input","onUpdate:modelValue":e[7]||(e[7]=f=>o.value=f),placeholder:"Secret",type:"text"},null,512),[[U,o.value]])]),t("div",Oe,[e[20]||(e[20]=t("div",{class:"empty-text"},null,-1)),t("div",{class:h(["submit-btn-wrapper",{"is-loading":M.value}]),onClick:z},[M.value?(u(),I(nt,{key:0})):_("",!0),M.value?_("",!0):(u(),y("div",Ee,"Submit"))],2)])])])])])]),p.value===0||p.value===1?(u(),I(it,{key:0,confirmType:p.value,message:b.value,onCloseConfirmModal:L},null,8,["confirmType","message"])):_("",!0)],64))}},Je=H(We,[["__scopeId","data-v-40e45d6d"]]),Re={key:0,class:"challenge"},Ye={class:"challenge-wrapper"},Qe={class:"challenge-live-filter"},Ke={class:"challenge-type-filter-wrapper"},Xe={class:"challenge-type-filter"},ts={class:"nfts"},es={class:"nft-content-wrapper"},ss={class:"nft-content-top-wrapper"},as=["src"],ls={class:"nft-content-top-title-wrapper"},is={class:"live-wrapper"},ns={key:0,xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},os=["fill"],rs={key:1,xmlns:"http://www.w3.org/2000/svg",width:"19",height:"19",viewBox:"0 0 19 19",fill:"none"},ds={class:"live-text"},cs={class:"live-title-wrapper"},fs={class:"live-title-text"},us={class:"type-wrapper"},vs={class:"type-text"},ps={class:"nft-description"},ms={class:"nft-date-wrapper"},ws={class:"nft-date-content-wrapper"},gs={class:"nft-date-content-text"},hs={class:"nft-date-content-text"},ks={class:"nft-duration-wrapper"},ys={class:"nft-duration-content-text"},Cs={class:"nft-award-wrapper"},xs=["onClick"],_s={class:"nft-btn-text"},bs={class:"pagination"},$s={class:"pagination-wrapper"},Ms={class:"number-wrapper"},Ds=["onClick"],Q=6,Ss={__name:"ChallengePage",setup(n){const c=g(!1),r=g(!1),i=g(null),v=g([]),d=g(0),o=g(0),w=g(1),x=Y(()=>C.value.length==0?1:Math.floor((C.value.length-1)/Q)+1),C=Y(()=>{if(v.value.length==0)return[];let l=v.value;d.value===1?l=v.value.filter(a=>a.status==="Live"):d.value===2?l=v.value.filter(a=>a.status==="Solved"):d.value===3&&(l=v.value.filter(a=>a.status==="Verified"));let s=l;return o.value===1?s=l.filter(a=>a.gameType==="secret"):o.value===2?s=[]:o.value===3&&(s=[]),s}),p=Y(()=>C.value.slice((w.value-1)*Q,w.value*Q)),b=l=>{l.status==="Live"&&(i.value=l,c.value=!0)},M=()=>{c.value=!1},P=()=>{r.value=!0},F=()=>{r.value=!1},N=l=>{d.value=l,w.value=1},B=l=>{o.value=l,w.value=1},V=l=>{l>x.value?w.value=x.value:l<1?w.value=1:w.value=l},L=async()=>{const l=await $t(0,1e3);v.value=l.map(s=>{const a=s[11],D=Math.floor(Date.now()/1e3);console.log(a);let S="Live";return a.toLowerCase()==="0xffffffffffffffffffffffffffffffffffffffff"||a===X&&D>Number(s[9])?S="Verified":a!==X&&(S="Solved"),{status:S,winnerAddress:a,id:s[0],tokenId:s[1],name:s[2],description:s[3],gameType:s[4],promptHash:s[5],secretHash:s[6],imageUri:s[7],startDate:Number(s[8]),endDate:Number(s[9]),awards:Number(s[10])}}).reverse(),console.log(v.value)},G=l=>{const s=new Date(l*1e3),a=String(s.getUTCMonth()+1).padStart(2,"0"),D=String(s.getUTCDate()).padStart(2,"0"),S=s.getUTCHours(),ot=String(s.getUTCMinutes()).padStart(2,"0"),rt=S>=12?"PM":"AM",dt=S%12||12;return`${a}.${D} ${dt}:${ot} ${rt}`},q=(l,s)=>{const D=(s-l)/(60*60*24);return Math.round(D)},z=l=>yt(l.toLocaleString("fullwide",{useGrouping:!1}),18),m=l=>l&&`Winner: ${l.slice(0,6)}...${l.slice(-4)}`,e=l=>l.length>96?`${l.slice(0,96)}...`:l;let f=null;return ht(async()=>{await L(),f=setInterval(async()=>{await L()},15e3)}),kt(()=>{f&&clearInterval(f)}),(l,s)=>(u(),y(Z,null,[!c.value&&!r.value?(u(),y("div",Re,[t("div",Ye,[s[13]||(s[13]=t("div",{class:"challenge-title-text"},"Challenges",-1)),t("div",Qe,[t("div",{class:h(["challenge-live-filter-btn",{"is-live-active":d.value===0}]),onClick:s[0]||(s[0]=a=>N(0))}," All ",2),t("div",{class:h(["challenge-live-filter-btn",{"is-live-active":d.value===1}]),onClick:s[1]||(s[1]=a=>N(1))}," Live ",2),t("div",{class:h(["challenge-live-filter-btn",{"is-live-active":d.value===2}]),onClick:s[2]||(s[2]=a=>N(2))}," Solved ",2),t("div",{class:h(["challenge-live-filter-btn",{"is-live-active":d.value===3}]),onClick:s[3]||(s[3]=a=>N(3))}," Verified ",2)]),t("div",Ke,[t("div",Xe,[t("div",{class:h(["challenge-type-filter-btn",{"is-type-active":o.value===0}]),onClick:s[4]||(s[4]=a=>B(0))},[t("div",{class:h(["challenge-type-filter-btn-text",{"is-type-text-active":o.value===0}])}," All Type ",2)],2),t("div",{class:h(["challenge-type-filter-btn",{"is-type-active":o.value===1}]),onClick:s[5]||(s[5]=a=>B(1))},[t("div",{class:h(["challenge-type-filter-btn-text",{"is-type-text-active":o.value===1}])}," Secret ",2)],2),t("div",{class:h(["challenge-type-filter-btn",{"is-type-active":o.value===2}]),onClick:s[6]||(s[6]=a=>B(2))},[t("div",{class:h(["challenge-type-filter-btn-text",{"is-type-text-active":o.value===2}])}," Slang ",2)],2),t("div",{class:h(["challenge-type-filter-btn",{"is-type-active":o.value===3}]),onClick:s[7]||(s[7]=a=>B(3))},[t("div",{class:h(["challenge-type-filter-btn-text",{"is-type-text-active":o.value===3}])}," Mismatch ",2)],2)]),t("div",{class:"challenge-create-new-btn",onClick:P}," + Create A New Challange ")]),t("div",ts,[(u(!0),y(Z,null,J(p.value,(a,D)=>(u(),y("div",{key:a.id,class:h(["nft-wrapper",{"is-verified-nft":a.status==="Verified"}])},[t("div",es,[t("div",ss,[t("img",{src:a.imageUri?a.imageUri:"@/assets/nft/0.png",alt:"nft"},null,8,as),t("div",ls,[t("div",is,[a.status!=="Verified"?(u(),y("svg",ns,[t("circle",{cx:"6",cy:"6.02026",r:"5.5",fill:a.status==="Live"?"#53926D":"#CC0000"},null,8,os)])):_("",!0),a.status==="Verified"?(u(),y("svg",rs,s[10]||(s[10]=[t("circle",{cx:"9.5",cy:"9.5",r:"8",fill:"#4DC4CF",stroke:"black","stroke-width":"2"},null,-1),t("rect",{x:"3.5",y:"7.91431",width:"2",height:"8.48528",transform:"rotate(-45 3.5 7.91431)",fill:"black"},null,-1),t("rect",{width:"2",height:"8.48563",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 15.5 7.91431)",fill:"black"},null,-1)]))):_("",!0),t("div",ds,k(a.status),1)]),t("div",cs,[t("div",fs,k(a.name),1),t("div",us,[t("div",vs,k(a.gameType),1)])])])]),t("div",ps,k(e(a.description)),1),t("div",ms,[s[11]||(s[11]=t("div",{class:"nft-date-text"},"Date",-1)),t("div",ws,[t("div",gs,k(G(a.startDate)),1),t("div",hs," ~ "+k(G(a.endDate)),1)])]),t("div",ks,[s[12]||(s[12]=t("div",{class:"nft-duration-text"},"Remaining",-1)),t("div",ys,k(q(a.startDate,a.endDate))+" days ",1)]),t("div",Cs,[t("div",{class:h(["nft-award-text",{"is-verified-nft-text":a.status==="Verified"}])}," Award ",2),t("div",{class:h(["nft-award-content-text",{"is-verified-nft-text":a.status==="Verified","is-solved-nft-text":a.status==="Solved"}])},k(z(a.awards))+" USDC ",3)])]),t("div",{class:h(["nft-btn",{"is-live":a.status==="Live","is-verified":a.status==="Verified"}]),onClick:S=>a.status!=="Solved"&&b(a)},[t("div",_s,k(a.status==="Solved"?m(a.winnerAddress):a.status==="Verified"?"Verified":"Challenge"),1)],10,xs)],2))),128))]),t("div",bs,[t("div",$s,[t("img",{src:St,alt:"left",onClick:s[8]||(s[8]=a=>V(w.value-1))}),(u(!0),y(Z,null,J(x.value,(a,D)=>(u(),y("div",Ms,[t("div",{class:h(["number-text",{"is-pagination-active":D+1===w.value}]),onClick:S=>V(D+1)},k(D+1),11,Ds)]))),256)),t("img",{src:Tt,alt:"right",onClick:s[9]||(s[9]=a=>V(w.value+1))})])])])])):_("",!0),c.value?(u(),I(Me,{key:1,nft:i.value,onCloseModal:M,onUpdateNftsData:L},null,8,["nft"])):_("",!0),r.value?(u(),I(Je,{key:2,onCloseCreateModal:F,onUpdateNftsData:L})):_("",!0)],64))}},Ts=H(Ss,[["__scopeId","data-v-214b42b8"]]),Bs={__name:"ChallengeView",setup(n){return(c,r)=>(u(),I(Ts))}};export{Bs as default};
